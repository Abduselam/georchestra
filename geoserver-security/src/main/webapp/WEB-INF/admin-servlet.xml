<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
						http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <bean id="layer-rules" class="com.camptocamp.security.LayerRules">
        <property name="location" value="${securityDir}"/>
    </bean>
    <bean id="roles" class="com.camptocamp.security.Roles">
        <property name="roleDAO" ref="roleDAO"/>
    </bean>
    <bean id="regions" class="com.camptocamp.security.Regions"/>
    <bean id="layers" class="com.camptocamp.security.Layers">
        <property name="capabilitiesURL" value="${capabilitiesURL}"/>
        <property name="location" value="${securityDir}"/>
        <property name="privelegedAdminUser" value="${privelegedAdminUser}"/>
        <property name="privelegedAdminPass" value="${privelegedAdminPass}"/>
    </bean>
    
    <bean id="contextSource"
        class="org.springframework.ldap.core.support.LdapContextSource">
        <property name="url" value="${ldapUrl}" />
        <property name="base" value="${authoritiesBaseDN}" />
        <property name="userDn" value="${ldapAdminDn}" />
        <property name="password" value="${ldapAdminPassword}" />
        <property name="pooled" value="true"/>
    </bean>
    <bean id="ldapTemplate" class="org.springframework.ldap.core.LdapTemplate">
        <constructor-arg ref="contextSource" />
    </bean>
    <bean id="roleDAO"
        class="com.camptocamp.security.LdapRolesDao">
        <property name="ldapTemplate" ref="ldapTemplate" />
    </bean>

    <bean id="properties-loader"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:locations="/WEB-INF/admin.properties" />
    
</beans>